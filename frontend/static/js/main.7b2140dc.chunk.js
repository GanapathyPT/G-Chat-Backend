(this["webpackJsonpg-chat"]=this["webpackJsonpg-chat"]||[]).push([[0],{101:function(e,t,n){e.exports={sideBarContainer:"SideBar_sideBarContainer__R9HZo",searchBarContainer:"SideBar_searchBarContainer__35kPV",searchBar:"SideBar_searchBar__2j2Fq",hidden:"SideBar_hidden__1aeSv"}},133:function(e,t,n){e.exports={authContainer:"AuthLayout_authContainer__lyNfd",authHeading:"AuthLayout_authHeading__1_lfe",authCard:"AuthLayout_authCard__c-7Cw"}},152:function(e,t,n){e.exports={alertContainer:"Login_alertContainer__2EguZ"}},201:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(43),s=n.n(c),u=n(36),i=(n(175),n(81)),o=n(14),l=n(7),d=n.n(l),j=n(16),f=n(8),b=n(218),p=n(99),h=n(45),O=n(202),m=n(152),v=n.n(m),x=n(3);function g(e){var t=e.ctrlRef,n=e.onSubmit,a=Object(r.useState)(""),c=Object(f.a)(a,2),s=c[0],u=c[1],i=Object(r.useState)(""),o=Object(f.a)(i,2),l=o[0],m=o[1],g=Object(r.useState)({}),_=Object(f.a)(g,2),w=_[0],C=_[1],k=Object(r.useState)(!1),y=Object(f.a)(k,2),R=y[0],S=y[1],N=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(""),e.next=3,n(s,l);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useImperativeHandle)(t,(function(){return{setError:C,setLoading:S}}),[]),Object(x.jsxs)(b.a,{onSubmit:N,children:[w.general?Object(x.jsx)("div",{className:v.a.alertContainer,children:Object(x.jsxs)(p.a,{prompt:!0,color:"red",children:[Object(x.jsx)(h.a,{name:"exclamation circle"}),w.general]})}):null,Object(x.jsx)(b.a.Input,{required:!0,label:"Email",placeholder:"email",icon:"mail",iconPosition:"left",value:s,onChange:function(e){return u(e.target.value)}}),Object(x.jsx)(b.a.Input,{required:!0,label:"Password",placeholder:"password",type:"password",icon:"key",iconPosition:"left",value:l,onChange:function(e){return m(e.target.value)}}),Object(x.jsx)(O.a,{type:"submit",primary:!0,loading:R,disabled:R,children:"Sign In"})]})}var _=n(220),w=n(133),C=n.n(w);function k(e){var t=e.heading,n=e.cardContent,r=e.extra;return Object(x.jsxs)("div",{className:C.a.authContainer,children:[Object(x.jsx)(_.a,{color:"blue",raised:!0,children:Object(x.jsxs)("div",{className:C.a.authCard,children:[Object(x.jsx)("h2",{className:C.a.authHeading,children:t}),n]})}),Object(x.jsx)("small",{children:r})]})}var y,R=n(10),S=n(125),N=n.n(S),A="/api/",I="",L=function(e){I=e},E=function(){return N.a.create({baseURL:A,timeout:5e3,headers:I?{Authorization:"Bearer ".concat(I)}:{}})};!function(e){e.AcessToken="ACCESS_TOKEN",e.RefreshToken="REFRESH_TOKEN"}(y||(y={}));var T=function(e,t){localStorage.setItem(e,t)},B=function(e){return localStorage.getItem(e)},P=n(61);function M(e){return"https://avatars.dicebear.com/api/avataaars/".concat(e||(Math.random()+1).toString(36).substring(t||7),".svg");var t}function H(e){return JSON.parse(JSON.stringify(e))}function U(e,t){return null!==e.title?e.title:e.users[0].id===t?e.users[1].username:e.users[0].username}function F(e){var t=q(e);return void 0===t?"Tap to start the conversation":t.content}function q(e){if(0!==e.messages.length)return e.messages[e.messages.length-1]}function z(e,t,n){return e.map((function(e){return e.id===t?Object(R.a)(Object(R.a)({},e),n(H(e))):e}))}function D(e){if(0===e.messages.length)return 0;var t=e.messages.findIndex((function(t){return t.id===e.last_read_message}));return e.messages.length-t-1}function J(e){return H(e).map((function(e){return Object(R.a)(Object(R.a)({},e),{},{unreadCount:D(e)})})).sort((function(e,t){return t.unreadCount-e.unreadCount}))}function V(e){return K.apply(this,arguments)}function K(){return(K=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E().post("chat/add_room/",{users:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return G.apply(this,arguments)}function G(){return(G=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E().get("chat/rooms/");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E().post("chat/new_message/",{content:t,room:n});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E().post("chat/get_new_messages/",{room_list:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E().post("chat/mark_as_read/",{room_id:t,last_read_message:n});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te,ne=!1,re=Object(u.b)({default:[],key:"rooms"}),ae=Object(u.b)({default:void 0,key:"selectedRoom"}),ce=Object(u.b)({default:[],key:"roomList"});function se(){var e=Object(u.c)(re),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(u.e)(ce),s=Object(u.c)(ae),i=Object(f.a)(s,2),o=i[0],l=i[1];Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ne){e.next=2;break}return e.abrupt("return");case 2:return ne=!0,e.next=5,Z();case 5:t=e.sent,a(t);case 7:case"end":return e.stop()}}),e)})))()}),[]),Object(r.useEffect)((function(){var e=n.map((function(e){var t=q(e);return{room_id:e.id,last_message:void 0!==t?t.id:-1}}));c(e)}),[n]);var b=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(t),r=z(n,t,(function(e){var t=q(e);return Object(R.a)(Object(R.a)({},e),{},{last_read_message:void 0!==t?t.id:-1})})),a(r),void 0!==(c=r.find((function(e){return e.id===t})))&&-1!==c.last_read_message){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,$(t,c.last_read_message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,X(t,o);case 4:n=e.sent,r=n.id,a((function(e){return z(e,o,(function(e){return Object(R.a)(Object(R.a)({},e),{},{last_read_message:r})}))}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{rooms:n,selectedRoom:n.find((function(e){return e.id===o})),selectRoom:b,addRoom:function(e){a((function(t){return[].concat(Object(P.a)(t),[e])})),l(e.id)},deSelectRoom:function(){l(void 0)},addMessage:p}}function ue(e,t,n){return ie.apply(this,arguments)}function ie(){return(ie=Object(j.a)(d.a.mark((function e(t,n,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E().post("auth/register/",{username:t,email:n,password:r,confirm_password:r});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t){return le.apply(this,arguments)}function le(){return(le=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E().post("auth/token/",{email:t,password:n});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return je.apply(this,arguments)}function je(){return(je=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E().get("auth/me/");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){return be.apply(this,arguments)}function be(){return(be=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E().post("auth/refresh/",{refresh:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e){return he.apply(this,arguments)}function he(){return(he=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E().get("auth/search/?username=".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oe,me,ve=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(t.access),T(y.AcessToken,t.access),T(y.RefreshToken,t.refresh),e.next=5,de();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();!function(e){e.NotAuthenticated="NOT_AUTHENTICATED",e.Authenticated="AUTHENTICATED",e.AuthenticationLoading="AUTHENTICATION_LOADING"}(me||(me={}));var xe=Object(r.createContext)({}),ge=function(e){var t=e.children,n=Object(r.useState)({status:me.AuthenticationLoading}),a=Object(f.a)(n,2),c=a[0],s=a[1],u=Object(R.a)(Object(R.a)({},c),function(e){return{login:function(){var t=Object(j.a)(d.a.mark((function t(n,r){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe(n,r);case 2:return a=t.sent,t.next=5,ve(a);case 5:c=t.sent,e(Object(R.a)(Object(R.a)({},c),{},{status:me.Authenticated}));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),register:function(){var t=Object(j.a)(d.a.mark((function t(n,r,a){var c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue(n,r,a);case 2:return c=t.sent,t.next=5,ve(c);case 5:s=t.sent,e(Object(R.a)(Object(R.a)({},s),{},{status:me.Authenticated}));case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),authenticate:function(){var t=Object(j.a)(d.a.mark((function t(n){var r,a,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==n){t.next=3;break}return e((function(e){return Object(R.a)(Object(R.a)({},e),{},{status:me.NotAuthenticated})})),t.abrupt("return");case 3:return t.prev=3,e((function(e){return Object(R.a)(Object(R.a)({},e),{},{status:me.AuthenticationLoading})})),L(n),t.next=8,de();case 8:r=t.sent,e(Object(R.a)(Object(R.a)({},r),{},{status:me.Authenticated})),t.next=33;break;case 12:if(t.prev=12,t.t0=t.catch(3),console.error(t.t0),t.prev=15,null!==(a=B(y.RefreshToken))){t.next=19;break}return t.abrupt("return");case 19:return t.next=21,fe(a);case 21:return c=t.sent,L(c.access),t.next=25,de();case 25:s=t.sent,e(Object(R.a)(Object(R.a)({},s),{},{status:me.Authenticated})),t.next=33;break;case 29:t.prev=29,t.t1=t.catch(15),console.error(t.t1),e((function(e){return Object(R.a)(Object(R.a)({},e),{},{status:me.NotAuthenticated})}));case 33:case"end":return t.stop()}}),t,null,[[3,12],[15,29]])})));return function(e){return t.apply(this,arguments)}}()}}(s));return Object(x.jsx)(xe.Provider,{value:u,children:t})},_e=function(){return Object(r.useContext)(xe)};function we(){var e=_e().login,t=Object(o.g)(),n=Object(r.useRef)(),a=function(){var r=Object(j.a)(d.a.mark((function r(a,c){var s,u,i,o;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,null===(s=n.current)||void 0===s||s.setLoading(!0),null===(u=n.current)||void 0===u||u.setError({}),r.next=5,e(a,c);case 5:t("/"),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),null===(i=n.current)||void 0===i||i.setError({general:"Invalid Credentials"}),console.error(r.t0);case 12:return r.prev=12,null===(o=n.current)||void 0===o||o.setLoading(!1),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,8,12,15]])})));return function(e,t){return r.apply(this,arguments)}}();return Object(x.jsx)(k,{heading:"Login",cardContent:Object(x.jsx)(g,{ctrlRef:n,onSubmit:a}),extra:Object(x.jsxs)(x.Fragment,{children:["Don't have an account? ",Object(x.jsx)(i.b,{to:"/register",children:"Register"})]})})}function Ce(e){var t=e.ctrlRef,n=e.onSubmit,a=Object(r.useState)(""),c=Object(f.a)(a,2),s=c[0],u=c[1],i=Object(r.useState)(""),o=Object(f.a)(i,2),l=o[0],p=o[1],h=Object(r.useState)(""),m=Object(f.a)(h,2),v=m[0],g=m[1],_=Object(r.useState)({}),w=Object(f.a)(_,2),C=w[0],k=w[1],y=Object(r.useState)(!1),R=Object(f.a)(y,2),S=R[0],N=R[1],A=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(""),e.next=3,n(s,l,v);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useImperativeHandle)(t,(function(){return{setError:k,setLoading:N}}),[]),Object(x.jsxs)(b.a,{onSubmit:A,children:[Object(x.jsx)(b.a.Input,{required:!0,label:"UserName",placeholder:"username",icon:"user",iconPosition:"left",value:s,onChange:function(e){return u(e.target.value)},error:C.username}),Object(x.jsx)(b.a.Input,{required:!0,label:"Email",placeholder:"email",icon:"mail",iconPosition:"left",value:l,onChange:function(e){return p(e.target.value)},error:C.email}),Object(x.jsx)(b.a.Input,{required:!0,label:"Password",placeholder:"password",type:"password",icon:"key",iconPosition:"left",value:v,onChange:function(e){return g(e.target.value)},error:C.password}),Object(x.jsx)(O.a,{type:"submit",primary:!0,loading:S,disabled:S,children:"Sign Up"})]})}function ke(){var e=_e().register,t=Object(o.g)(),n=Object(r.useRef)(),a=function(){var r=Object(j.a)(d.a.mark((function r(a,c,s){var u,i,o,l;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,null===(u=n.current)||void 0===u||u.setLoading(!0),null===(i=n.current)||void 0===i||i.setError({}),r.next=5,e(a,c,s);case 5:t("/"),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),null===(o=n.current)||void 0===o||o.setError(r.t0.response.data),console.error(r.t0);case 12:return r.prev=12,null===(l=n.current)||void 0===l||l.setLoading(!1),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,8,12,15]])})));return function(e,t,n){return r.apply(this,arguments)}}();return Object(x.jsx)(k,{heading:"Register",cardContent:Object(x.jsx)(Ce,{ctrlRef:n,onSubmit:a}),extra:Object(x.jsxs)(x.Fragment,{children:["Already have an account? ",Object(x.jsx)(i.b,{to:"/login",children:"Login"})]})})}var ye=n(221),Re=n(214);function Se(){return Object(x.jsx)(ye.a,{active:!0,inverted:!0,children:Object(x.jsx)(Re.a,{})})}function Ne(e){var t=e.element,n=e.loggedIn,r=_e().status;return r===me.Authenticated?!0===n?t:Object(x.jsx)(o.a,{replace:!0,to:"/"}):r===me.NotAuthenticated&&!0!==n?t:Object(x.jsx)(o.a,{replace:!0,to:"/login"})}var Ae=n(215),Ie=n(156),Le=n(155),Ee=n(223),Te=n(213),Be=n(92),Pe=n.n(Be),Me=Object(r.memo)((function(e){var t=e.messages,n=_e().id;return Object(x.jsx)(x.Fragment,{children:t.map((function(e){return Object(x.jsx)("p",{className:"".concat(Pe.a.chatMessage," ").concat(e.author===n?Pe.a.ourMessage:""),children:Object(x.jsx)("span",{children:e.content})},e.id)}))})}),(function(e,t){var n=e.messages,r=t.messages;return n.length===r.length&&n[n.length-1]===r[r.length-1]}));function He(){var e=Object(r.useRef)(null),t=se(),n=t.selectedRoom,a=t.deSelectRoom,c=t.addMessage,s=Object(r.useState)(""),u=Object(f.a)(s,2),i=u[0],o=u[1];return Object(r.useEffect)((function(){null!==e.current&&e.current.scrollIntoView()}),[n,null===n||void 0===n?void 0:n.messages]),void 0===n?null:Object(x.jsx)(Le.a,{computer:12,mobile:16,children:Object(x.jsxs)(Ee.a,{className:Pe.a.chatRoomContainer,children:[Object(x.jsx)(h.a,{className:Pe.a.backButton,name:"arrow left",size:"big",onClick:a}),Object(x.jsxs)("div",{className:Pe.a.messagesContainer,children:[Object(x.jsx)(Me,{messages:n.messages}),Object(x.jsx)("div",{ref:e})]}),Object(x.jsx)(Te.a,{autoFocus:!0,value:i,onKeyPress:function(e){13===e.charCode&&(c(e.target.value),o(""))},onChange:function(e){return o(e.target.value)},label:Object(x.jsx)(O.a,{primary:!0,icon:!0,active:!0,onClick:function(){c(i),o("")},children:Object(x.jsx)(h.a,{name:"send"})}),labelPosition:"right",placeholder:"Type anything . . ."})]})})}var Ue=n(224),Fe=n(216),qe=n(217),ze=n(219),De=n(157),Je=n(72),Ve=n.n(Je);function Ke(){var e=_e().id,t=se(),n=t.rooms,r=t.selectedRoom,a=t.selectRoom;return Object(x.jsx)(ze.a,{animated:!0,celled:!0,size:"big",className:Ve.a.roomsList,children:J(n).map((function(t){return Object(x.jsx)(ze.a.Item,{onClick:function(){return a(t.id)},style:{padding:0},children:Object(x.jsx)("div",{className:t.id===(null===r||void 0===r?void 0:r.id)?Ve.a.active:"",children:Object(x.jsxs)("div",{className:Ve.a.roomItem,children:[Object(x.jsx)("div",{className:Ve.a.profilePic,children:Object(x.jsx)(De.a,{avatar:!0,src:M("".concat(t.id,"_").concat(e))})}),Object(x.jsxs)(ze.a.Content,{children:[Object(x.jsx)(ze.a.Header,{children:U(t,e)}),Object(x.jsx)(ze.a.Description,{children:Object(x.jsx)("p",{className:Ve.a.description,children:F(t)})}),0!==t.unreadCount&&(null===r||void 0===r?void 0:r.id)!==t.id?Object(x.jsx)("div",{className:Ve.a.unreadCountContainer,children:Object(x.jsx)(p.a,{color:"red",floating:!0,circular:!0,children:t.unreadCount})}):null]})]})})},t.id)}))})}var Ze=n(101),Ge=n.n(Ze);function Xe(){var e=function(){var e=_e().id,t=se().addRoom,n=Object(r.useState)(""),a=Object(f.a)(n,2),c=a[0],s=a[1],u=Object(r.useState)(!1),i=Object(f.a)(u,2),o=i[0],l=i[1],b=Object(r.useState)([]),p=Object(f.a)(b,2),h=p[0],O=p[1],m=function(){var t=Object(j.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0!==Oe&&Oe.cancel(),Oe=N.a.CancelToken.source(),t.next=4,pe(n);case 4:return r=t.sent,t.abrupt("return",r.filter((function(t){return t.id!==e})).map((function(e){return{id:e.id,title:e.username,description:e.email}})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{onSearchChange:function(){var e=Object(j.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.value){e.next=10;break}return s(n.value),l(!0),e.next=5,m(n.value);case 5:r=e.sent,O(r),l(!1),e.next=11;break;case 10:s("");case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),onResultSelect:function(){var e=Object(j.a)(d.a.mark((function e(n,r){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.result.id,e.next=3,V([a]);case 3:c=e.sent,t(c),O([]),s("");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),searchLoading:o,searchResult:h,searchText:c}}(),t=e.onResultSelect,n=e.onSearchChange,a=e.searchLoading,c=e.searchResult,s=e.searchText,u=se().selectedRoom;return Object(x.jsx)(Le.a,{computer:4,mobile:16,children:Object(x.jsxs)("div",{className:"".concat(Ge.a.sideBarContainer," ").concat(u?Ge.a.hidden:""),children:[Object(x.jsx)(Ue.a,{textAlign:"center",size:"huge",children:"G Chat"}),Object(x.jsxs)("div",{className:Ge.a.searchBarContainer,children:[Object(x.jsx)(Fe.a,{className:Ge.a.searchBar,placeholder:"Search User . . .",loading:a,onResultSelect:t,onSearchChange:n,results:c,value:s}),Object(x.jsx)(qe.a,{simple:!0,direction:"left",icon:"ellipsis vertical",children:Object(x.jsx)(qe.a.Menu,{children:Object(x.jsx)(qe.a.Item,{children:"Logout"})})})]}),Object(x.jsx)(Ke,{})]})})}function Qe(){return function(){var e=_e().status,t=Object(u.e)(re),n=Object(u.d)(ce);Object(r.useEffect)((function(){if(e===me.Authenticated&&n.length>0)return te=setInterval(Object(j.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(n);case 2:if(r=e.sent,Object.values(r).some((function(e){return e.length>0}))){e.next=5;break}return e.abrupt("return");case 5:t((function(e){var t=H(e);return Object.keys(r).forEach((function(e){var n,a=parseInt(e);if(0!==r[a].length){var c=t.findIndex((function(e){return e.id===a}));(n=t[c].messages).push.apply(n,Object(P.a)(r[a]))}})),t}));case 6:case"end":return e.stop()}}),e)}))),1e3),function(){return clearInterval(te)}}),[e,n])}(),Object(x.jsx)(Ae.a,{columns:"two",divided:!0,children:Object(x.jsxs)(Ie.a,{children:[Object(x.jsx)(Xe,{}),Object(x.jsx)(He,{})]})})}var We=function(){var e=_e(),t=e.authenticate,n=e.status;return Object(r.useEffect)((function(){var e=B(y.AcessToken);t(e)}),[]),n===me.AuthenticationLoading?Object(x.jsx)(Se,{}):Object(x.jsx)(i.a,{children:Object(x.jsxs)(o.d,{children:[Object(x.jsx)(o.b,{path:"/login",element:Object(x.jsx)(Ne,{element:Object(x.jsx)(we,{})})}),Object(x.jsx)(o.b,{path:"/register",element:Object(x.jsx)(Ne,{element:Object(x.jsx)(ke,{})})}),Object(x.jsx)(o.b,{path:"/",element:Object(x.jsx)(Ne,{element:Object(x.jsx)(Qe,{}),loggedIn:!0})})]})})};s.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(u.a,{children:Object(x.jsx)(ge,{children:Object(x.jsx)(We,{})})})}),document.getElementById("root"))},72:function(e,t,n){e.exports={roomsList:"RoomsList_roomsList__31XFJ",roomItem:"RoomsList_roomItem__2X1gb",active:"RoomsList_active__2zITE",profilePic:"RoomsList_profilePic__bFvVP",description:"RoomsList_description__3Njkr",unreadCountContainer:"RoomsList_unreadCountContainer__2Um04"}},92:function(e,t,n){e.exports={chatRoomContainer:"ChatRoom_chatRoomContainer__ChMZ0",backButton:"ChatRoom_backButton__2eVk_",messagesContainer:"ChatRoom_messagesContainer__1A1r9",chatMessage:"ChatRoom_chatMessage__237QU",ourMessage:"ChatRoom_ourMessage__383Bd"}}},[[201,1,2]]]);
//# sourceMappingURL=main.7b2140dc.chunk.js.map